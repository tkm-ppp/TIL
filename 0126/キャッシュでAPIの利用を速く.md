# キャッシュでAPIの利用を速く
## フラグメントキャッシュ
通常、動的なwebアプリケーションでは、ページのキャッシュ時の特性が異なるさまざまなコンポーネントによってページが生成されます。ページ内の異なる部品について、キャッシュや期限切れを個別に設定したい場合は、フラグメントキャッシュを使います。

フラグメントキャッシュでは、ビューのロジックのフラグメントをキャッシュブロックでラップし、次回のリクエストでそれをキャッシュストアから取り出して送信します。

たとえば、ページ内で表示する製品（product）を個別にキャッシュしたい場合、次のように書くことができます。
```
<% @products.each do |product| %>
  <% cache product do %>
    <%= render product %>
  <% end %>
<% end %>
```
Railsアプリケーションが最初のリクエストを受信すると、一意のキーを備えた新しいキャッシュが保存されます。生成されるキーは次のようなものになります。
```
views/products/1-201505056193031061005000/bea67108094918eeba42cd4a6e786901
```


* 今まで検索したものはキャッシュで保存
* ６０日保存に変更
* キャッシュは静的データのみ、動的データは使えない
→→動的データは疑似静的データに
* ユーザーのアクビリティは
* 自由検索ではなく、タグでジャンルごとに２００ほど出してもらって

本と本の所蔵状況とどこの図書館で使うかを保存する
APIを通常で検索